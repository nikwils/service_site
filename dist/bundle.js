(()=>{"use strict";const e=function(e){var t=document.getElementById(e),n=document.createElement("div"),o=document.querySelector(".popup");t.addEventListener("submit",(function(e){n.style.cssText="font-size: 2rem;";var a=e.target;e.preventDefault(),n.hidden=!1,n.textContent="Загрузка",t.appendChild(n),a.matches("#form3")&&(n.style.cssText="color: white;");var r=new FormData(t),u={};r.forEach((function(e,t){u[t]=e})),c(u).then((function(e){if(200!==e.status)throw new Error("status network not 200");n.textContent="Спасибо! Мы скоро с вами свяжемся",a.matches("#form3")&&(n.style.cssText="color: white;",setTimeout((function(){o.style.display="none"}),8e3)),setTimeout((function(){n.hidden=!0}),5e3)})).catch((function(e){n.textContent="Что-то пошло не так...",console.error(e)}))}));var c=function(e){return document.querySelectorAll("input").forEach((function(e){return e.value=""})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}};var t,n,o,c,a,r,u,l,i,s,m;(function(e){var t,n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),a=document.querySelectorAll(".timer-numbers span");function r(e){return e<10?"0"+e:e}t=setInterval((function(){var e,u,l,i=(e=(new Date("27 feb 2021").getTime()-(new Date).getTime())/1e3,u=Math.floor(e%60),l=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60%24),minutes:l,seconds:u}),s=r(i.hours),m=r(i.minutes),d=r(i.seconds);n.textContent=s,o.textContent=m,c.textContent=d,i.timeRemaining<0&&(clearInterval(t),n.textContent="00",o.textContent="00",c.textContent="00",a.forEach((function(e){e.style.color="red"})))}),1e3)})(),i=document.querySelector(".menu"),s=document.querySelector("menu"),m=function(){s.classList.toggle("active-menu")},s.addEventListener("click",(function(e){"A"===e.target.tagName&&m()})),i.addEventListener("click",m),document.addEventListener("click",(function(e){var t=e.target;t.closest("menu")||t.closest(".menu")||s.classList.remove("active-menu")})),function(){var e,t=document.querySelector(".popup"),n=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content"),c=document.querySelector("menu"),a=0;function r(){c.classList.remove("active-menu"),e=requestAnimationFrame(r),a+=1,document.documentElement.clientWidth>768?a<40?(t.style.display="block",o.style.left=a+"%"):cancelAnimationFrame(e):(o.style.left="30%",t.style.display="block",cancelAnimationFrame(e))}n.forEach((function(e){e.addEventListener("click",(function(){a=0,r()}))})),t.addEventListener("click",(function(e){var n=e.target;n.classList.contains("popup-close")?(a=0,t.style.display="none"):(n=n.closest(".popup-content"))||(a=0,t.style.display="none")}))}(),r=document.querySelector(".service-header"),u=r.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=event.target;(t=t.closest(".service-header-tab"))&&u.forEach((function(e,n){e===t&&function(e){for(var t=0;t<l.length;t++)e===t?(u[t].classList.add("active"),l[t].classList.remove("d-none")):(u[t].classList.remove("active"),l[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),o=0,c=document.querySelector(".portfolio-dots"),a=[];!function(){for(var e=0;e<t.length;e++){var n=document.createElement("li");c.append(n),a.push(n),n.classList.add("dot"),0===e&&n.classList.add("dot-active")}}(),c=document.querySelector(".portfolio-dots");var r=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},l=function(){r(t,o,"portfolio-item-active"),r(a,o,"dot-active"),++o>=t.length&&(o=0),u(t,o,"portfolio-item-active"),u(a,o,"dot-active")},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(l,t)};i(1500),n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(r(t,o,"portfolio-item-active"),r(a,o,"dot-active"),n.matches("#arrow-right")?o++:n.matches("#arrow-left")?o--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(o=t)})),o>=t.length?o=0:o<0&&(o=t.length-1),u(t,o,"portfolio-item-active"),u(a,o,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()}))}(),(a=document.querySelector("#command")).addEventListener("mouseover",(function(e){var t=e.target,n=t.src;t.matches(".command__photo")&&(t.src=t.dataset.img),a.addEventListener("mouseout",(function(){t.matches(".command__photo")&&(t.src=n)}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),r=document.getElementById("total"),u=function(){var t=0,u=1,l=1,i=n.options[n.selectedIndex].value,s=+o.value;a.value>1&&(u+=(a.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),i&&s&&(t=Math.ceil(e*i*s*u*l)),r.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&u()}))}(100),t=document.querySelector(".calc-block"),n=document.querySelector(".main-form-input"),o=document.querySelector(".footer-form-input"),c=document.getElementById("form3"),document.getElementById("form1"),document.getElementById("form2"),t.addEventListener("input",(function(e){var t=e.target;t.matches(".calc-square, .calc-count, .calc-day")&&(t.value=t.value.replace(/\D/g,""))})),c.addEventListener("input",(function(e){var t=e.target;t.matches("#form3-name")&&(t.value=t.value.replace(/\w/g,""),c.addEventListener("change",(function(){t.value=t.value.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))}))),t.matches("#form3-phone")&&(t.value=t.value.replace(/[\D() -]/g,""),t.matches(/\d{7,13}/)&&(c.button.disabled=!1)),t.matches("#form3-email")&&(t.value=t.value.replace(/\W@./g,""))})),n.addEventListener("input",(function(e){var t=e.target;t.matches("#form1-name")&&(t.value=t.value.replace(/\w/g,""),n.addEventListener("change",(function(){t.value=t.value.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))}))),t.matches("#form1-phone")&&(t.value=t.value.replace(/[\D+() -]/g,"")),t.matches("#form1-email")&&(t.value=t.value.replace(/\W@./g,""))})),o.addEventListener("input",(function(e){var t=e.target;t.matches("#form2-name","#form2-message")&&(t.value=t.value.replace(/\w/g,""),o.addEventListener("change",(function(){t.value=t.value.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))}))),t.matches("#form2-phone")&&(t.value=t.value.replace(/[\D() -]/g,"")),t.matches("#form2-email")&&(t.value=t.value.replace(/\W@./g,""))})),e("form1"),e("form2"),e("form3")})();